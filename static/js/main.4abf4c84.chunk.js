(this["webpackJsonpblogpost-site"]=this["webpackJsonpblogpost-site"]||[]).push([[0],{41:function(e,t,n){},61:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n(17),c=n.n(a),r=(n(41),n(16)),o=n(5),i=n(4),u=n.n(i),l=n(6),j=n(3),b=n(34),p=n.n(b).a.create({baseURL:"https://blog-post-api-rest.herokuapp.com"}),d=n(19),O=n.n(d),f=n(35),h=n.n(f),m=(n(61),n(15)),x=n.n(m),v=n(1),g=Object(s.createContext)({});function N(e){var t=e.children,n=Object(s.useState)(x.a.get("user")),a=Object(j.a)(n,2),c=a[0],r=a[1],o=Object(s.useState)(x.a.get("token")),i=Object(j.a)(o,2),b=i[0];i[1];function d(){return(d=Object(l.a)(u.a.mark((function e(t,n,s){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.post("/user/login",{username:t,password:n});case 3:a=e.sent,(c=a.data)?(x.a.set("user",c.user.username),x.a.set("token",c.token),r(c.user.username)):s("Internal error"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),s(e.t0.response.data.error);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function O(){return(O=Object(l.a)(u.a.mark((function e(t,n,s){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("sing up"),e.prev=1,e.next=4,p.post("/user/register",{username:t,password:n});case 4:a=e.sent,(c=a.data)?(x.a.set("user",c.user.username),x.a.set("token",c.token),r(c.user.username)):s("Internal error"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),s(e.t0.response.data.error);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function f(){return(f=Object(l.a)(u.a.mark((function e(t,n,s){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("creat post"),e.prev=1,e.next=4,p.post("/blogpost/create",{title:t,content:n},{headers:{Authorization:"Bearer ".concat(b)}});case 4:a=e.sent,c=a.data,console.log("data",c),c||s("Internal error"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),s(e.t0.response.data.error);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}return Object(s.useEffect)((function(){r(c)}),[c]),Object(v.jsx)(g.Provider,{value:{user:c,token:b,loginUser:function(e,t,n){return d.apply(this,arguments)},logUserOut:function(){x.a.remove("user"),x.a.remove("token"),r(null),window.location.reload()},singUpUser:function(e,t,n){return O.apply(this,arguments)},createPost:function(e,t,n){return f.apply(this,arguments)}},children:t})}var w=function(){return Object(s.useContext)(g)};function y(e){var t=e.post,n=w(),a=n.user,c=n.token,o=Object(s.useState)(a),i=Object(j.a)(o,2),b=i[0],d=i[1];function f(){return(f=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.delete("blogpost/".concat(t),{headers:{Authorization:"Bearer ".concat(c)}});case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return console.log("token",c),Object(s.useEffect)((function(){d(b)}),[a,b]),Object(v.jsxs)("div",{className:"post-wrapper",children:[Object(v.jsx)(r.b,{className:"link-post",style:{textDecoration:"none"},to:"post/".concat(t.slug),children:Object(v.jsxs)("div",{onClick:function(){return console.log("teste")},className:"post-card",children:[Object(v.jsx)("h2",{children:t.title}),Object(v.jsx)("p",{children:t.content}),Object(v.jsxs)("div",{className:"createdby",children:[Object(v.jsx)(O.a,{style:{fontSize:"48px"}}),Object(v.jsx)("span",{children:t.created_by})]})]})}),t.created_by===b&&Object(v.jsx)("i",{onClick:function(){return function(e){return f.apply(this,arguments)}(t.id)},className:"delete-post",children:Object(v.jsx)(h.a,{})})]})}n(72);function k(){var e=Object(s.useState)(),t=Object(j.a)(e,2),n=t[0],a=t[1];return Object(s.useEffect)((function(){function e(){return(e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.get("/blogpost");case 2:return e.next=4,e.sent.data;case 4:t=e.sent,a(t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(v.jsx)("div",{className:"posts",children:null===n||void 0===n?void 0:n.map((function(e,t){return Object(v.jsx)(y,{post:e},t)}))})}n(73);function S(e){var t=e.isVisible,n=Object(s.useState)(t),a=Object(j.a)(n,2),c=a[0],r=a[1];Object(s.useEffect)((function(){r(t)}),[t]);var o=Object(s.useState)(!1),i=Object(j.a)(o,2),b=i[0],p=i[1],d=Object(s.useState)(""),O=Object(j.a)(d,2),f=O[0],h=O[1],m=Object(s.useState)(""),x=Object(j.a)(m,2),g=x[0],N=x[1],y=Object(s.useState)(""),k=Object(j.a)(y,2),S=k[0],C=k[1],E=w(),U=E.user,F=E.loginUser;function P(){return(P=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),p(!b),C(""),e.prev=3,e.next=6,F(f,g,C);case 6:S||window.location.reload(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),C(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}return Object(s.useEffect)((function(){r(!1)}),[U]),Object(v.jsxs)("form",{onSubmit:function(e){return function(e){return P.apply(this,arguments)}(e)},className:"login-form ".concat(c?"form-actived":"form-disabled"),children:[Object(v.jsx)("h1",{className:"login-title",children:"Login"}),Object(v.jsxs)("div",{className:"container-email-login",children:[Object(v.jsx)("input",{required:!0,onChange:function(e){return h(e.target.value)},className:"input-email login-input",name:"email",type:"text"}),Object(v.jsx)("label",{className:"label-email label-login ",htmlFor:"",children:"Username"})]}),Object(v.jsxs)("div",{className:"container-password-login",children:[Object(v.jsx)("input",{required:!0,onChange:function(e){return N(e.target.value)},className:"input-password login-input",type:"password"}),Object(v.jsx)("label",{className:"label-password label-login",htmlFor:"",children:"Password"})]}),Object(v.jsx)("div",{className:"errox-box",children:Object(v.jsx)("span",{className:"error-message",children:S})}),Object(v.jsx)("button",{className:"button-login",disabled:!f||!g,type:"submit",children:"Login"})]})}n(74);function C(e){var t=e.isVisible,n=Object(s.useState)(t),a=Object(j.a)(n,2),c=a[0],r=a[1];Object(s.useEffect)((function(){r(t)}),[t]);var o=Object(s.useState)(!1),i=Object(j.a)(o,2),b=i[0],p=i[1],d=Object(s.useState)(""),O=Object(j.a)(d,2),f=O[0],h=O[1],m=Object(s.useState)(""),x=Object(j.a)(m,2),g=x[0],N=x[1],y=Object(s.useState)(""),k=Object(j.a)(y,2),S=k[0],C=k[1],E=w(),U=E.user,F=E.singUpUser;function P(){return(P=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),p(!b),C(""),e.prev=3,e.next=6,F(f,g,C);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),C(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}return Object(s.useEffect)((function(){r(!1)}),[U]),Object(v.jsxs)("form",{onSubmit:function(e){return function(e){return P.apply(this,arguments)}(e)},className:"register-form ".concat(c?"form-actived":"form-disabled"),children:[Object(v.jsx)("h1",{className:"register-title",children:"Sign Up"}),Object(v.jsxs)("div",{className:"container-email-register",children:[Object(v.jsx)("input",{required:!0,onChange:function(e){return h(e.target.value)},className:"input-email register-input",name:"email",type:"text"}),Object(v.jsx)("label",{className:"label-email label-register ",htmlFor:"",children:"Username"})]}),Object(v.jsxs)("div",{className:"container-password-register",children:[Object(v.jsx)("input",{required:!0,onChange:function(e){return N(e.target.value)},className:"input-password register-input",type:"password"}),Object(v.jsx)("label",{className:"label-password label-register",htmlFor:"",children:"Password"})]}),Object(v.jsx)("div",{className:"errox-box",children:Object(v.jsx)("span",{className:"error-message",children:S})}),Object(v.jsx)("button",{className:"button-register",disabled:!f||!g,type:"submit",children:"Sign Up"})]})}n(75),n(76);function E(e){var t=e.isVisible,n=Object(s.useState)(""),a=Object(j.a)(n,2),c=a[0],r=a[1],o=Object(s.useState)(""),i=Object(j.a)(o,2),b=i[0],p=i[1],d=Object(s.useState)(""),O=Object(j.a)(d,2),f=O[0],h=O[1],m=w().createPost;function x(){return(x=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,m(c,b,h);case 4:f||window.location.reload(),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}return Object(v.jsxs)("div",{className:"create-post ".concat(!t&&"create-disabled"),children:[Object(v.jsx)("h1",{className:"create-post-title",children:"Create Post"}),Object(v.jsxs)("form",{className:"create-post-form",action:"",children:[Object(v.jsxs)("div",{className:"title-post-box",children:[Object(v.jsx)("input",{onChange:function(e){return r(e.target.value)},required:!0,className:"create-post-input",type:"text"}),Object(v.jsx)("label",{className:"create-post-label",children:"Title"})]}),Object(v.jsxs)("div",{className:"create-post-box",children:[Object(v.jsx)("textarea",{className:"create-post-textarea",onChange:function(e){return p(e.target.value)},required:!0}),Object(v.jsx)("label",{className:"content-post-label",children:"Content"})]}),Object(v.jsx)("button",{onClick:function(e){return function(e){return x.apply(this,arguments)}(e)},className:"create-button",type:"submit",children:"Create Post"}),Object(v.jsx)("div",{className:"error-message-box",children:Object(v.jsx)("span",{className:"error-message",children:f})})]})]})}function U(){var e=Object(s.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(!1),r=Object(j.a)(c,2),o=r[0],i=r[1],u=Object(s.useState)(!1),l=Object(j.a)(u,2),b=l[0],p=l[1],d=w(),O=d.user,f=d.logUserOut;Object(s.useEffect)((function(){a(!1)}),[O]),Object(s.useEffect)((function(){i(!1)}),[O]);var h=Object(s.useRef)(null),m=Object(s.useRef)(null),x=Object(s.useRef)(null),g=function(e){var t,n,s;(null===m||void 0===m||null===(t=m.current)||void 0===t?void 0:t.contains(e.target))||i(!1),(null===h||void 0===h||null===(n=h.current)||void 0===n?void 0:n.contains(e.target))||a(!1),(null===x||void 0===x||null===(s=x.current)||void 0===s?void 0:s.contains(e.target))||p(!1)};return Object(s.useEffect)((function(){return document.addEventListener("mousedown",g),function(){document.removeEventListener("mousedown",g)}}),[]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{ref:x,children:Object(v.jsx)(E,{isVisible:b})}),Object(v.jsx)("div",{ref:h,children:Object(v.jsx)(S,{isVisible:n})}),Object(v.jsx)("div",{ref:m,children:Object(v.jsx)(C,{isVisible:o})}),Object(v.jsx)("div",{className:"actions-header",children:O?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return p(!0)},className:"create-post-button",children:"Create Post"}),Object(v.jsx)("a",{onClick:function(){return f()},href:"#",className:"create-post-link",children:"Log out"}),Object(v.jsx)("span",{className:"user-username",children:O})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{onClick:function(){return a(!n)},className:"login-button  action-button",children:"login"}),Object(v.jsx)("button",{onClick:function(){return i(!o)},className:"register-button action-button",children:"register"})]})})]})}n(77);function F(){var e=Object(o.e)(),t=Object(s.useState)(""),n=Object(j.a)(t,2),a=n[0],c=n[1];function r(){return(r=Object(l.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e.push("post/".concat(a));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(v.jsxs)("form",{onSubmit:function(e){return function(e){return r.apply(this,arguments)}(e)},className:"search-form",children:[Object(v.jsx)("input",{onChange:function(e){var t=e.target.value.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"");c(t)},className:"search-input",required:!0,type:"text"}),Object(v.jsx)("label",{className:"search-label",children:"Search for a post"}),Object(v.jsx)("button",{type:"submit",className:"search-button",children:"Search"})]})}n(78);function P(){return Object(v.jsxs)("div",{className:"home",children:[Object(v.jsxs)("div",{className:"header-bar",children:[Object(v.jsx)(F,{}),Object(v.jsx)(U,{})]}),Object(v.jsx)(k,{})]})}n(79);function q(e){var t=e.match;console.log("history",t.params.slug);var n=t.params.slug,a=Object(s.useState)({}),c=Object(j.a)(a,2),o=c[0],i=c[1],b=Object(s.useState)(""),d=Object(j.a)(b,2),f=d[0],h=d[1];return Object(s.useEffect)((function(){function e(){return(e=Object(l.a)(u.a.mark((function e(){var t,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.get("blogpost/".concat(n));case 3:t=e.sent,s=t.data,i(s.post),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),h(e.t0.response.data.error);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(v.jsx)(v.Fragment,{children:f?Object(v.jsxs)("div",{className:"not-found-page",children:[Object(v.jsx)("strong",{className:"error-message",children:f}),Object(v.jsx)(r.b,{to:"/",children:Object(v.jsx)("button",{className:"not-found-button",children:"Home"})})]}):Object(v.jsxs)("div",{className:"post-page-box",children:[Object(v.jsx)("h1",{className:"post-page-title",children:null===o||void 0===o?void 0:o.title}),Object(v.jsxs)("div",{className:"post-page-createdby",children:[Object(v.jsx)(O.a,{style:{fontSize:"48px"}}),Object(v.jsx)("span",{className:"post-page-span",children:o.created_by})]}),Object(v.jsx)("textarea",{readOnly:!0,value:o.content,className:"post-page-textarea",children:o.content}),Object(v.jsx)(r.b,{to:"/",children:Object(v.jsx)("button",{className:"return-home-button",children:"Home"})})]})})}n(80);var L=function(){return Object(v.jsx)("div",{className:"app",children:Object(v.jsxs)(r.a,{basename:window.location.pathname||"",children:[Object(v.jsx)(o.a,{path:"/",exact:!0,component:P}),Object(v.jsx)(o.a,{path:"/post/:slug",exact:!0,component:q})]})})};c.a.render(Object(v.jsx)(N,{children:Object(v.jsx)(L,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.4abf4c84.chunk.js.map